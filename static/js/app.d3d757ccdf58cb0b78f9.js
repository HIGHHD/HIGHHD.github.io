webpackJsonp([1],{"+skl":function(e,t){},"5/Rt":function(e,t){},BzB4:function(e,t){},GWva:function(e,t){},NHnr:function(e,t,r){"use strict";function n(e){var t=navigator.userAgent;return"ie"===e?!!(t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1)&&(new RegExp("MSIE (\\d+\\.\\d+);").test(t),parseFloat(RegExp.$1)):t.indexOf(e)>-1}function a(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r=te()({},ae,r);var a=void 0,o=[],s=[];return e?(a=e.map(function(e){return"string"==typeof e?e:(n||s.push(void 0!==e.title?e.title:e.key),e.key)}),s.length>0&&ne(o,s,r)):(a=[],t.forEach(function(e){Array.isArray(e)||(a=a.concat(B()(e)))}),a.length>0&&(a=a.filter(function(e,t,r){return r.indexOf(e)===t}),n||ne(o,a,r))),Array.isArray(t)&&t.forEach(function(e){Array.isArray(e)||(e=a.map(function(t){return void 0!==e[t]?e[t]:""})),ne(o,e,r)}),o.join(re)}Object.defineProperty(t,"__esModule",{value:!0});var o=r("7+uW"),s=r("BTaQ"),i=r.n(s),u=(r("+skl"),r("BzB4"),r("mBuK"),r("szwE"),r("//Fk")),l=r.n(u),c=r("mtWM"),d=r.n(c),p=r("mvHQ"),h=r.n(p),m=r("pFYg"),f=r.n(m);o.default.use(i.a);var v=function(e,t){if(e="sczq_report_"+e,void 0===t){var r=localStorage.getItem(e);return r&&0===r.indexOf("autostringify-")?JSON.parse(r.split("autostringify-")[1]):r}return("object"===(void 0===t?"undefined":f()(t))||Array.isArray(t))&&(t="autostringify-"+h()(t)),localStorage.setItem(e,t)},y=function(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]},b=function e(t){for(var r in t)"object"===y(t[r])?e(t[r]):"array"===y(t[r])?t[r]=[]:t[r]=null},g=function e(t){if(!t)return t;var r=t instanceof Array?[]:{};for(var n in t)r[n]="object"===f()(t[n])?e(t[n]):t[n];return r},I=function(e,t,r,n,a){"function"!=typeof a&&(a=function(e){return e.expand=!0,e.title=e.resourceName,e.parentName=e.resourceName,0===e[t]&&(e.parentName="报表系统"),e});var o=[],s=Array.isArray(e)?e.map(function(e){return e[r]}):[];return t=t||"parent",e.forEach(function(e,n){if(e[t]&&e[t]!==e[r])Array.isArray(s)&&-1===s.findIndex(function(r){return r===e[t]})&&o.push(e);else{delete e[t];var i=g(e);o.push(a(i))}}),function o(s){Array.isArray(s)&&s.length&&s.forEach(function(s){e.forEach(function(e){e=a(e),s[r]===e[t]&&(s[n]?s[n].push(e):s[n]=[e])}),s[n]&&o(s[n])})}(o),o},_=function(e){var t=e.data;if(t){if(void 0===t.errorCode)return t;switch(t.errorCode){case"0":case 0:return t.data||t.attachment||t;case"1":case 1:return t.data||t.attachment||t;case"2":case 2:o.default.prototype.$Message.error({content:t.msg||t.message||"请求参数异常！"});break;case"10":case 10:o.default.prototype.$Message.error({content:"token异常，请联系管理员！"});break;case"11":case 11:v("token",""),v("username",""),o.default.prototype.$Message.error({content:"token失效，需要重新登录！"});break;case"12":case 12:o.default.prototype.$Message.error({content:"无此权限，请向管理员确认！"});break;default:o.default.prototype.$Message.error({content:"未知错误!"})}}return t},w=function(e){if(e.response)switch(i.a.LoadingBar.error(),e.response.status){case 400:o.default.prototype.$Message.error({content:e.response.data.message||"请求参数异常"});break;case 401:o.default.prototype.$Message.warning({content:e.response.data.message||"密码错误或账号不存在！",onClose:function(){location.reload()}});break;case 403:o.default.prototype.$Message.warning({content:e.response.data.message||"无访问权限，请联系企业管理员"});break;default:o.default.prototype.$Message.error({content:e.response.data.message||"服务端异常，请联系技术支持"})}return l.a.reject(e)};o.default.use(i.a);var E=d.a.create({baseURL:"http://192.168.202.201:8080/",timeout:1e4});E.defaults.headers.post["Content-Type"]="application/json",E.interceptors.request.use(function(e){return i.a.LoadingBar.start(),e},w),E.interceptors.response.use(function(e){return i.a.LoadingBar.finish(),_(e)},w);var k=E;o.default.use(i.a);var S=d.a.create({baseURL:"http://192.168.202.201:9969/",timeout:1e4}),D=v("token"),x="report-app";S.defaults.headers.common.Authorization="Bearer "+D,S.interceptors.request.use(function(e){return i.a.LoadingBar.start(),e},w),S.interceptors.response.use(function(e){return i.a.LoadingBar.finish(),_(e)},w);var M={userAll:{p:["get,/auth/v1/user/roles/**"],r:function(e){return S.get("/auth/v1/user/roles/"+x)}},userQuery:{p:["get,/auth/v1/user/roles/query/**"],r:function(e){return S.get("/auth/v1/user/roles/query/"+x,{params:e})}},userAdd:{p:["post,/auth/v1/user/roles/**"],r:function(e){var t=new FormData;for(var r in e)e[r]&&t.append(r,e[r]);return S.post("/auth/v1/user/roles/"+x,t)}},userDelete:{p:["delete,/auth/v1/user/roles/**"],r:function(e){var t=new FormData;for(var r in e)e[r]&&t.append(r,e[r]);return S.delete("/auth/v1/user/roles/"+x,{params:e})}},rolesAll:{p:["get,/auth/v1/roles/**"],r:function(e){return S.get("/auth/v1/roles/"+x)}},rolesAdd:{p:["post,/auth/v1/roles/**"],r:function(e){var t=new FormData;for(var r in e)e[r]&&t.append(r,e[r]);return S.post("/auth/v1/roles/"+x,e)}},rolesUpdate:{p:["put,/auth/v1/roles/**"],r:function(e){var t=new FormData;for(var r in e)e[r]&&t.append(r,e[r]);return S.put("/auth/v1/roles/"+x,e)}},rolesDetails:{p:["get,/auth/v1/roles/**"],r:function(e){return S.get("/auth/v1/roles/report-app/"+e)}},rolesDelete:{p:["delete,/auth/v1/roles/**"],r:function(e){return S.delete("/auth/v1/roles/report-app/"+e)}},resourceAll:{p:["get,/auth/v1/resource/**"],r:function(e){return S.get("/auth/v1/resource/"+x)}},resourceAdd:{p:["post,/auth/v1/resource/**"],r:function(e){var t=new FormData;for(var r in e)e[r]&&t.append(r,e[r]);return S.post("/auth/v1/resource/"+x,e)}},resourceUpdate:{p:["put,/auth/v1/resource/**"],r:function(e){var t=new FormData;for(var r in e)e[r]&&t.append(r,e[r]);return S.put("/auth/v1/resource/"+x,e)}},resourceDetails:{p:["get,/auth/v1/resource/**"],r:function(e){return S.get("/auth/v1/resource/report-app/"+e)}},resourceDelete:{p:["delete,/auth/v1/resource/**"],r:function(e){return S.delete("/auth/v1/resource/report-app/"+e)}},authUser:{r:function(e){return S.get("/auth/v1/auth/authorize/",{params:{appCode:x}})}},authResourceLoad:{r:function(e){return S.get("/auth/v1/auth/loadResources/",{params:{appCode:x}})}},authPermissions:{r:function(e){return S.get("/auth/v1/auth/permissions",{params:{appCode:x}})}},rrAdd:{r:function(e){var t=new FormData;for(var r in e)e[r]&&t.append(r,e[r]);return S.post("/auth/v1/role/resources/"+x,t)}},rrDelete:{r:function(e){return S.delete("/auth/v1/role/resources/"+x,{params:e})}},rrGet:{r:function(e){return S.get("/auth/v1/role/resources/report-app/"+e)}}},A={name:"THeader",data:function(){return{screen:!1}},methods:{toggleSideBar:function(){this.$store.dispatch("ToggleSideBar")},toggleScreen:function(){if(this.screen)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this.$Message.error({content:"请升级浏览器，不然我是不会理你的！",duration:3}),this.screen=!1;else{var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():this.$Message.error({content:"除了让你升级浏览器对方没什么好说的！",duration:3}),this.screen=!0}}}},R={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[r("div",{staticClass:"nav-icon",on:{click:e.toggleSideBar}},[r("Icon",{attrs:{type:"navicon-round"}})],1),e._v(" "),r("div",{staticClass:"expand-screen",on:{click:e.toggleScreen}},[r("Tooltip",{attrs:{placement:"bottom",content:"全屏"}},[e.screen?e._e():r("Icon",{attrs:{type:"android-expand"}}),e._v(" "),e.screen?r("Icon",{attrs:{type:"android-contract"}}):e._e()],1)],1),e._v(" "),r("div",{staticClass:"msg-group-box"},[e._t("msg-icon"),e._v(" "),e._t("right")],2)])},staticRenderFns:[]},T={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"navbar"},[this._t("default")],2)},staticRenderFns:[]},C={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("div",{attrs:{id:"sticker"}},[t("div",{attrs:{id:"stickerCon"}},[this._t("default")],2)]),this._v(" "),t("div",{attrs:{id:"footer"}},[this._v("©copyright by 首创证券")])])},staticRenderFns:[]},$={name:"Index",components:{"t-header":r("VU/8")(A,R,!1,function(e){r("GWva")},null,null).exports,"nav-bar":r("VU/8")({name:"NavBar",components:{},data:function(){return{}},computed:{sidebar:function(){return{}}}},T,!1,null,null,null).exports,container:r("VU/8")({name:"container",data:function(){return{}}},C,!1,null,null,null).exports},data:function(){return{username:"",menus:[],theme:"light",themeBool:!0,formItem:{input:"",select:"",radio:"male",checkbox:[],switch:!0,date:"",time:"",slider:[20,50],textarea:""}}},created:function(){var e=this.$parent.username;this.$parent.token&&e?this.username=e:this.$router.push({path:"/login"});var t=this.$parent.menuData;t&&(this.menus=t)},computed:{state:function(){return this.$store.state.app},breadsMap:function(){var e={};return this.$route.meta.paths.forEach(function(t){var r=t.id,n=t.bread;e[r]=n}),e},breads:function(){var e=(this.$route.path||"").split("/").filter(function(e){if(""!==e)return e}),t=(this.$route.meta.bread||"").split("/").filter(function(e){if(""!==e)return e});e.length>=2&&("reports"===e[e.length-2]&&(t=[this.breadsMap[e[e.length-1]]],(e=e.filter(function(e){return"reports"!==e}))[e.length-1]="reports/"+e[e.length-1]),"crud"===e[e.length-2]&&(t=[this.breadsMap[e[e.length-1]]],(e=e.filter(function(e){return"crud"!==e}))[e.length-1]="crud/"+e[e.length-1]));var r=[];if(e.length>=1&&e.length===t.length)for(var n="/",a=0;a<e.length;a++){var o={};a===e.length-1?n+=e[a]:n+=e[a]+"/",o.pathValue=n,o.name=t[a],r.push(o)}return r}},methods:{showOpen:function(e){},onItemSelect:function(e){this.$router.push({path:e})},logout:function(){var e=this;this.$Modal.confirm({title:"提示",content:"<p>确认退出？</p>",onOk:function(){e.$emit("logout")},onCancel:function(){}})},themeChange:function(e){this.theme=e?"light":"dark"}}},N={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-wrapper",class:{hideSidebar:!e.state.sidebar.opened,hoverSideBar:e.state.sidebar.minOpen}},[r("div",{staticClass:"side-wrapper",class:{hover:!e.state.sidebar.minOpen,light:"light"==e.theme}},[r("nav-bar",{staticStyle:{"padding-bottom":"80px",top:"0px"}},[r("Menu",{attrs:{theme:e.theme,"active-name":e.$route.path,"open-names":[e.$route.meta.metaParent],width:"220"},on:{"on-open-change":e.showOpen,"on-select":e.onItemSelect}},[e._l(e.menus,function(t,n){return[t.children?[r("Submenu",{key:n,attrs:{name:t.meta.path}},[r("template",{slot:"title"},[r("Icon",{attrs:{type:t.meta.icon?t.meta.icon:"folder"}}),e._v("\n                "+e._s(t.meta.name)+"\n              ")],1),e._v(" "),e._l(t.children,function(t,n){return r("MenuItem",{key:n,attrs:{name:t.meta.path}},[r("Icon",{key:n,attrs:{type:t.meta.icon?t.meta.icon:"folder"}}),e._v("\n                "+e._s(t.meta.name)+"\n              ")],1)})],2)]:t.meta.paths||t.meta.paths.length>0?[r("Submenu",{key:n,attrs:{name:t.meta.path}},[r("template",{slot:"title"},[r("Icon",{attrs:{type:t.meta.icon?t.meta.icon:"folder"}}),e._v("\n                "+e._s(t.meta.name)+"\n              ")],1),e._v(" "),e._l(t.meta.paths,function(t,n){return r("MenuItem",{key:n,attrs:{name:t.path}},[r("Icon",{key:n,attrs:{type:t.icon?t.icon:"folder"}}),e._v("\n                "+e._s(t.name)+"\n              ")],1)})],2)]:[r("MenuItem",{key:n,attrs:{name:t.meta.path}},[r("Icon",{key:n,attrs:{type:t.meta.icon?t.meta.icon:"folder"}}),e._v("\n              "+e._s(t.meta.name)+"\n            ")],1)]]})],2)],1),e._v(" "),r("div",{staticClass:"theme-switch",class:{hidden:!e.state.sidebar.opened}},[e._v("\n      切换主题\n      "),r("i-switch",{attrs:{size:"large"},on:{"on-change":e.themeChange},model:{value:e.themeBool,callback:function(t){e.themeBool=t},expression:"themeBool"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v("Light")]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v("Dark")])])],1)],1),e._v(" "),r("div",{staticClass:"main-wrapper"},[r("t-header",[r("Dropdown",{staticClass:"userBox",attrs:{slot:"right"},slot:"right"},[r("a",{attrs:{href:"javascript:void(0)"}},[e._v("\n          "+e._s(e.username)+"\n          "),r("Icon",{attrs:{type:"arrow-down-b"}})],1),e._v(" "),r("Dropdown-menu",{attrs:{slot:"list"},slot:"list"},[r("Dropdown-item",{nativeOn:{click:function(t){return e.logout(t)}}},[e._v("退出登录")])],1)],1)],1),e._v(" "),r("div",{staticClass:"main-container"},[r("container",[r("Breadcrumb",[r("Breadcrumb-item",{attrs:{to:"/"}},[r("Icon",{attrs:{type:"ios-home-outline"}}),e._v("\n            首页\n          ")],1),e._v(" "),e._l(e.breads,function(t,n){return r("Breadcrumb-item",{key:n,attrs:{to:t.pathValue}},[e._v("\n            "+e._s(t.name)+"\n          ")])})],2),e._v(" "),r("transition",{attrs:{name:"fade",mode:"out-in"}},[r("router-view",{attrs:{id:"main"}})],1)],1)],1)],1)])},staticRenderFns:[]},F=r("VU/8")($,N,!1,null,null,null).exports,q=r("Dd8w"),U=r.n(q),P=r("NYxO"),L=r("fZjL"),B=r.n(L),O=r("gBtx"),j=r.n(O),G={r:function(e){return k.get("dmp/v1/report/definition/"+e)}},z={r:function(e){var t=h()(e.query);return k.get("dmp/v1/report/data/"+e.reportId,{params:{parameters:t}})}},V={name:"ITablePluginSearch",props:{pluginTableData:{type:Array,default:function(){return[]}},pluginTableColumns:{type:Array,default:function(){return[]}},styleType:{type:String,default:"default"},showSearch:{type:Boolean,default:!0},searchWidth:{type:Number||String,default:300}},data:function(){return{searchColumns:[],tableDataClone:this.pluginTableData,tableColumnsClone:this.pluginTableColumns,searchContent:"",dropDownColumns:[{type:"selection",width:60,align:"center"},{title:"列名",key:"title",align:"center",width:150}]}},methods:{search:function(e,t){return e.filter(function(e){var r=!1;for(var n in t)t[n].length>0&&"string"==typeof e[n]&&(r=r||e[n].indexOf(t[n])>-1);return r})},handleSearch:function(){var e=this,t={};e.tableSearchColumns.map(function(e){return e.key}).forEach(function(r){t[r]=e.searchContent});var r=this.search(this.tableDataClone,t);this.$emit("update:pluginTableData",r)},onBlurEvent:function(){this.searchContent||this.$emit("on-blur-search")},dropSelectChange:function(e){var t=e;this.tableColumnsClone.forEach(function(e){var r=t.findIndex(function(t){return t.key===e.key});e.visible=r>-1}),this.$emit("update:pluginTableColumns",this.tableColumnsClone)}},watch:{pluginTableData:function(e){e.length>0&&0===this.tableDataClone.length&&(this.tableDataClone=e)},pluginTableColumns:function(e){this.tableColumnsClone=e}},computed:{tableSearchColumns:function(){return this.tableColumnsClone.filter(function(e){return e.visible})}}},Q={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{position:"relative",display:"inline-block"}},[r("span",{staticStyle:{"margin-right":"5px",display:"inline-block"}},[r("Dropdown",{attrs:{trigger:"click"}},[r("Button",{attrs:{type:e.styleType}},[r("Icon",{attrs:{type:"grid"}}),e._v(" "),r("Icon",{attrs:{type:"arrow-down-b"}})],1),e._v(" "),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("Table",{attrs:{columns:e.dropDownColumns,data:e.tableColumnsClone.filter(function(e){return e._checked=e.visible,!e.fixShow}),height:"300"},on:{"on-selection-change":e.dropSelectChange}})],1)],1)],1),e._v(" "),e.showSearch?r("span",{staticStyle:{display:"inline-block"}},[r("Input",{style:"width:"+e.searchWidth+"px;",attrs:{placeholder:e.tableSearchColumns.map(function(e){return e.title}).join("/"),icon:"ios-search"},on:{"on-click":e.handleSearch,"on-blur":e.onBlurEvent,"on-enter":e.handleSearch},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}})],1):e._e()])},staticRenderFns:[]},W=r("VU/8")(V,Q,!1,function(e){r("nBxg")},"data-v-79eeb54a",null).exports,Z={name:"MultipleSelect",props:{selectData:{type:Array,default:function(){return[]}},referName:{type:String,default:""},styleType:{type:String,default:"default"},disabled:{type:Boolean,default:!1}},data:function(){return{returnArray:[]}},computed:{btnText:function(){var e=this;return e.returnArray.length>0?e.selectData.filter(function(t){return e.returnArray.findIndex(function(e){return e===t.value})>-1}).map(function(e){return e.label}).join(",").slice(0,12)+"...":"请选择"}},methods:{cgChange:function(e){var t={name:this.referName,value:this.returnArray};this.$emit("enums-modify",t)}},watch:{$route:function(){this.returnArray=[]}}},Y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Dropdown",{attrs:{trigger:"click"}},[r("Button",{attrs:{type:e.styleType,disabled:e.disabled}},[e._v("\n    "+e._s(e.btnText)+"\n    "),r("Icon",{attrs:{type:"arrow-down-b"}})],1),e._v(" "),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("div",{staticStyle:{"min-height":"40px","overflow-y":"auto","max-height":"300px",padding:"5px"}},[r("CheckboxGroup",{on:{"on-change":e.cgChange},model:{value:e.returnArray,callback:function(t){e.returnArray=t},expression:"returnArray"}},e._l(e.selectData,function(t){return r("Checkbox",{key:t.value,attrs:{label:t.value}},[r("span",[e._v(e._s(t.label))])])}))],1)])],1)},staticRenderFns:[]},K={name:"QueryPart",components:{MultipleSelect:r("VU/8")(Z,Y,!1,function(e){r("iB1g")},"data-v-0fc616af",null).exports},props:{pQueryData:{type:Array,default:function(){return[]}},styleType:{type:String,default:"primary"}},data:function(){return{queryForm:{startDate:"2011-01-01"},queryFormData:[]}},watch:{pQueryData:function(e){this.queryFormData=[],this.queryForm={},this.$options.methods.renderQueryPart(this,e)}},computed:{colSpan:function(){return this.pQueryData.length<=3?6:8}},methods:{searchInfo:function(){var e=g(this.queryForm);this.$emit("btn-search",e)},resetInfo:function(){b(this.queryForm),this.$emit("btn-reset")},enumsModify:function(e){var t=e.name,r=e.value;this.queryForm[t]=r},renderQueryPart:function(e,t){function r(e){e.forEach(function(e){"input"===e.type?n.$set(n.queryForm,e.paramName,""):"enums"===e.type?e.enumDef.multiple?n.$set(n.queryForm,e.paramName,[]):n.$set(n.queryForm,e.paramName,""):"sql"===e.type?e.sqlDef.multiple?n.$set(n.queryForm,e.paramName,[]):n.$set(n.queryForm,e.paramName,""):"date"===e.type&&n.$set(n.queryForm,e.paramName,"")})}var n=e,a=[],o=g(t);if(o.length>0&&o.push({type:"btn"}),4===o.length)r(o),n.queryFormData=o;else{for(var s=0,i=o.length;s<i;s+=3){var u=o.slice(s,s+3);a.push(u),r(u)}n.queryFormData=a}}}},H={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{attrs:{model:e.queryForm,"label-width":100,"label-position":"right"}},e._l(e.queryFormData,function(t,n){return r("Row",{key:n,attrs:{type:"flex",justify:"start",align:"top"}},e._l(t,function(t,n){return r("Col",{key:n,attrs:{span:e.colSpan}},["input"===t.type?r("FormItem",{attrs:{label:t.title}},[r("Input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:t.title},model:{value:e.queryForm[t.paramName],callback:function(r){e.$set(e.queryForm,t.paramName,r)},expression:"queryForm[cItem.paramName]"}})],1):e._e(),e._v(" "),"enums"!==t.type||t.enumDef.multiple?e._e():r("FormItem",{attrs:{label:t.title}},[r("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:""},model:{value:e.queryForm[t.paramName],callback:function(r){e.$set(e.queryForm,t.paramName,r)},expression:"queryForm[cItem.paramName]"}},e._l(t.enumDef.enumsData,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}))],1),e._v(" "),"enums"===t.type&&t.enumDef.multiple?r("FormItem",{attrs:{label:t.title}},[r("multiple-select",{attrs:{selectData:t.enumDef.enumsData,referName:t.paramName},on:{"enums-modify":e.enumsModify}})],1):e._e(),e._v(" "),"sql"!==t.type||t.sqlDef.multiple?e._e():r("FormItem",{attrs:{label:t.title}},[r("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:""},model:{value:e.queryForm[t.paramName],callback:function(r){e.$set(e.queryForm,t.paramName,r)},expression:"queryForm[cItem.paramName]"}},e._l(t.sqlDef.queryData,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}))],1),e._v(" "),"sql"===t.type&&t.sqlDef.multiple?r("FormItem",{attrs:{label:t.title}},[r("multiple-select",{attrs:{selectData:t.sqlDef.queryData,referName:t.paramName},on:{"enums-modify":e.enumsModify}})],1):e._e(),e._v(" "),"date"===t.type?r("FormItem",{attrs:{label:t.title}},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{value:e.queryForm[t.paramName],clearable:"",format:t.dateDef.format||"yyyy-MM-dd",type:t.dateDef.type,placeholder:t.title},on:{"on-change":function(r){e.queryForm[t.paramName]=r}}})],1):e._e(),e._v(" "),"btn"===t.type?r("FormItem",[r("ButtonGroup",{staticStyle:{"margin-left":"-70px"}},[r("Button",{attrs:{type:e.styleType,icon:"ios-search"},on:{click:e.searchInfo}},[e._v("查询")]),e._v(" "),r("Button",{attrs:{type:e.styleType,icon:"ios-loop-strong"},on:{click:e.resetInfo}},[e._v("重置")])],1)],1):e._e()],1)}))}))},staticRenderFns:[]},J=r("VU/8")(K,H,!1,function(e){r("mFur")},"data-v-4ef55377",null).exports,X={_isIE11:function(){var e=0,t=/MSIE (\d+\.\d+);/.test(navigator.userAgent),r=!!navigator.userAgent.match(/Trident\/7.0/),n=navigator.userAgent.indexOf("rv:11.0");return t&&(e=Number(RegExp.$1)),-1!==navigator.appVersion.indexOf("MSIE 10")&&(e=10),r&&-1!==n&&(e=11),11===e},_isEdge:function(){return/Edge/.test(navigator.userAgent)},_getDownloadUrl:function(e){if(window.Blob&&window.URL&&window.URL.createObjectURL){var t=new Blob(["\ufeff"+e],{type:"text/csv"});return URL.createObjectURL(t)}return"data:attachment/csv;charset=utf-8,\ufeff"+encodeURIComponent(e)},download:function(e,t){if(n("ie")&&n("ie")<10){var r=window.top.open("about:blank","_blank");r.document.charset="utf-8",r.document.write(t),r.document.close(),r.document.execCommand("SaveAs",e),r.close()}else if(10===n("ie")||this._isIE11()||this._isEdge()){var a=new Blob(["\ufeff"+t],{type:"text/csv"});navigator.msSaveBlob(a,e)}else{var o=document.createElement("a");o.download=e,o.href=this._getDownloadUrl(t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}}},ee=r("woOf"),te=r.n(ee),re="\r\n",ne=function(e,t,r){var n=r.separator,a=r.quoted,o=t.map(function(e){return a?'"'+(e="string"==typeof e?e.replace(/"/g,'"'):e)+'"':e});e.push(o.join(n))},ae={separator:",",quoted:!1},oe={name:"ReportTableDefault",components:{ITablePluginSearch:W,"i-table-plugin-search":W,"query-part":J},props:{styleType:{type:String,default:"default"},showQueryPart:{type:Boolean,default:!0},reportId:{type:String,default:""},showSearch:{type:Boolean,default:!0}},watch:{reportId:function(e){this.reportList=[[]],this.$options.methods.defTable(this,e)}},mounted:function(){this.$options.methods.defTable(this,this.reportId)},data:function(){return{queryData:[],reportList:[],colSpan:24,searchWidth:300,editType:"add",modalMeta:{}}},methods:{defTable:function(e,t){var r=e;G.r(t).then(function(e){if(e.table.queryItems?(r.queryData=[],r.queryData=e.table.queryItems):r.queryData=[],e.reports&&e.reports.length>1){var t=[],n=e.columns||2;r.colSpan=24/j()((e.columns||2)+""),r.searchWidth=200,e.reports.forEach(function(e){var r={};r.reportId=e.reportId,r.reportName=e.reportName,r.width=e.table.width||"",r.height=e.table.height||"",r.reportCol=g(e.table.fields),r.pagenable=e.table.pageFlag||!1,r.reportData=[],t.push(r)});for(var a=[],o=0,s=t.length;o<s;o+=n)a.push(t.slice(o,o+n));r.reportList=a}else{r.colSpan=24/j()((e.columns||1)+""),r.searchWidth=300;var i={};i.reportId=e.reportId,i.reportName=e.reportName,i.width=e.table.width||"",i.height=e.table.height||"";var u=g(e.table.fields);i.reportCol=u,i.pagenable=e.table.pageFlag||!1,i.reportData=[],r.reportList=[[i]]}r.queryInfo(r,{})}).catch(function(e){})},exportInfo:function(e){var t={};this.reportList.forEach(function(r){r.forEach(function(r){r.reportId===e&&(t.reportData=r.reportData,t.reportName=r.reportName||"报表",t.reportCol=r.reportCol.filter(function(e){return!e.fixShow}))})}),t.reportData?this.$Modal.confirm({title:"提示",content:"将要导出"+t.reportData.length+"行数据",onOk:function(){var e=a(t.reportCol,t.reportData);X.download(t.reportName+".csv",e)}}):this.$Message.error({content:"出错啦！请刷新网页"})},tableSelectChange:function(){},queryInfo:function(e,t){for(var r=e,n=!0,a=B()(t),o=a.length-1;o>=0;o--)n=t[a[o]]&&n;n?r.reportList.forEach(function(e){e.forEach(function(e){var r={reportId:e.reportId,query:t};z.r(r).then(function(t){Array.isArray(t)?e.reportData=t:e.reportData=[]}).catch(function(e){})})}):e.$Modal.warning({title:"提示",content:"查询参数不能为空"})},searchInfo:function(e){this.queryInfo(this,e)},resetInfo:function(){this.queryInfo(this,{})}}},se={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{margin:"10px"}},[e.showQueryPart?r("query-part",{staticStyle:{"margin-bottom":"-10px"},attrs:{pQueryData:e.queryData},on:{"btn-reset":e.resetInfo,"btn-search":e.searchInfo}}):e._e(),e._v(" "),e._l(e.reportList,function(t,n){return r("Row",{key:n,staticStyle:{"margin-bottom":"10px"},attrs:{gutter:16,type:"flex",justify:"start",align:"top"}},e._l(t,function(t,a){return r("Col",{key:a,attrs:{span:e.colSpan}},[r("Card",{attrs:{title:t.reportName,padding:0,icon:"ios-list-outline"}},[r("div",{attrs:{slot:"extra"},slot:"extra"},[r("div",{staticStyle:{display:"inline-block","margin-top":"-5px"}},[e.showSearch?r("i-table-plugin-search",{staticStyle:{margin:"0px 5px 0px 5px"},attrs:{"search-width":e.searchWidth,pluginTableData:e.reportList[n][a].reportData,pluginTableColumns:e.reportList[n][a].reportCol},on:{"update:pluginTableData":function(t){e.$set(e.reportList[n][a],"reportData",t)},"update:pluginTableColumns":function(t){e.$set(e.reportList[n][a],"reportCol",t)}}}):e._e()],1),e._v(" "),r("a",{staticStyle:{display:"inline-block"},attrs:{href:"#"},on:{click:function(r){r.preventDefault(),e.exportInfo(t.reportId)}}},[r("Icon",{attrs:{type:"ios-upload-outline"}}),e._v("\n            导出\n          ")],1)]),e._v(" "),r("Table",{attrs:{columns:t.reportCol.filter(function(e){return e.visible||e.fixShow}),data:t.reportData,width:t.width,height:t.height,border:""},on:{"on-selection-change":e.tableSelectChange}}),e._v(" "),t.pagenable?r("Row",{staticStyle:{margin:"10px 0px 10px 0px"}},[r("Col",{attrs:{span:"24"}},[r("Page",{staticStyle:{float:"right","margin-right":"20px"},attrs:{total:t.reportData.length,"show-elevator":"","show-sizer":"","show-total":""}})],1)],1):e._e()],1)],1)}))})],2)},staticRenderFns:[]},ie={name:"Reports",components:{ReportTableDefault:r("VU/8")(oe,se,!1,function(e){r("YdMT")},"data-v-e29a8c6e",null).exports},data:function(){return{authToReport:!0}},computed:U()({},Object(P.b)(["reportsMenus"])),watch:{$route:function(e,t){var r=this.reportsMenus.map(function(e){return e.path});r.findIndex(function(t){return t===e.path})<0?this.authToReport=!1:this.authToReport=!0}},methods:{}},ue={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.$route.params.reportId&&e.authToReport?r("report-table-default",{attrs:{styleType:"primary",reportId:e.$route.params.reportId}}):e._e(),e._v(" "),e.authToReport?e._e():r("h1",{staticStyle:{"margin-top":"20px"}},[e._v("无查阅此报表的权限")])],1)},staticRenderFns:[]},le=r("VU/8")(ie,ue,!1,function(e){r("Zo5t")},"data-v-20d0316c",null).exports,ce={r:function(e){return k.get("dmp/v1/crud/"+e+"/definition")}},de={r:function(e){return k.post("dmp/v1/crud/"+e.crudId+"/add",e.query)}},pe={r:function(e){var t=h()(e.query);return k.get("dmp/v1/crud/"+e.crudId+"/list",{params:{parameters:t}})}},he={r:function(e){return k.put("dmp/v1/crud/"+e.crudId+"/update",e.query)}},me={r:function(e){return k.delete("dmp/v1/crud/"+e.crudId+"/remove/"+e.query)}},fe={name:"CrudTableDefault",components:{ITablePluginSearch:W,QueryPart:J},props:{styleType:{type:String,default:"default"},showQueryPart:{type:Boolean,default:!0},crudId:{type:String,default:""},showSearch:{type:Boolean,default:!0}},watch:{crudId:function(e){this.$options.methods.defTable(this,e)}},computed:{tabColList:function(){var e=this,t=e.modalMeta.columns,r=g(e.modalMeta.fields);if(e.modalMeta.tabFlag){var n=g(e.modalMeta.tabs);return n.forEach(function(e){var n=r.filter(function(t){return t.tabIndex+""==e.index+""});e.colList=[];for(var a=0,o=n.length;a<o;a+=t)e.colList.push(n.slice(a,a+t))}),n}return[]}},mounted:function(){this.$options.methods.defTable(this,this.crudId)},data:function(){return{queryData:[],queryForm:{},queryPartClone:{},tableDef:{},searchWidth:300,editType:"add",showCrudModal:!1,editData:{},modalMeta:{},nowItem:{}}},methods:{defTable:function(e,t){var r=e;ce.r(t).then(function(e){r.queryData=e.table.queryItems,r.modalMeta=e.table.formDefine,r.tableDef.width=e.table.width||"",r.tableDef.height=e.table.height||"",r.tableDef.tableName=e.entityTitle,r.tableDef.pagenable=e.table.pageFlag||!1;var t=g(e.table.fields);t.unshift({width:60,type:"selection",align:"center",fixShow:!0}),r.$set(r.tableDef,"tableCol",t),r.$set(r.tableDef,"tableData",[]),r.queryInfo(r,{})}).catch(function(e){})},exportInfo:function(){var e=this,t={};t.tableData=e.tableDef.tableData,t.tableName=e.tableDef.tableName||"报表",t.tableCol=e.tableDef.tableCol.filter(function(e){return!e.fixShow}),t.tableData?e.$Modal.confirm({title:"提示",content:"将要导出"+t.tableData.length+"行数据",onOk:function(){var e=a(t.tableCol,t.tableData);X.download(t.tableName+".csv",e)}}):e.$Message.error({content:"出错啦！请刷新网页"})},tableSelectChange:function(e){1===e.length?this.editData=g(e[0]):this.editData={}},queryInfo:function(e,t){var r=e,n={crudId:r.crudId,query:t};pe.r(n).then(function(e){Array.isArray(e)?r.$set(r.tableDef,"tableData",e):r.$set(r.tableDef,"tableData",[])}).catch(function(e){})},searchInfo:function(e){this.queryPartClone=g(e),this.queryInfo(this,e)},resetInfo:function(){this.queryPartClone={},this.queryInfo(this,{})},submitData:function(){var e=this,t=this,r=g(t.queryForm);if("add"===t.editType){var n={crudId:t.crudId,query:r};de.r(n).then(function(t){e.queryInfo(e,e.queryPartClone)}).catch(function(e){})}else if("update"===t.editType){r.recordId=t.editData.recordId;var a={crudId:t.crudId,query:r};he.r(a).then(function(t){e.queryInfo(e,e.queryPartClone)}).catch(function(e){})}},cancelSubmit:function(){this.showCrudModal=!1},buildModalForm:function(e,t,r){t.forEach(function(t){var n=t.dataSource.trim();if("input"===n){var a=r?r[t.key]:"";e.$set(e.queryForm,t.key,a)}else if("enum"===n)if(t.enumDef.multiple){var o=r?r[t.key]:[];e.$set(e.queryForm,t.key,o)}else{var s=r?r[t.key]:"";e.$set(e.queryForm,t.key,s)}else if("sql"===n)if(t.sqlDef.multiple){var i=r?r[t.key]:[];e.$set(e.queryForm,t.key,i)}else{var u=r?r[t.key]:"";e.$set(e.queryForm,t.key,u)}else"date"===n&&(r&&r[t.key],e.$set(e.queryForm,t.key,""))})},addInfo:function(){this.$options.methods.buildModalForm(this,this.modalMeta.fields),this.editType="add",this.showCrudModal=!0},updateInfo:function(){var e=this;e.editData.recordId?(e.$options.methods.buildModalForm(e,e.modalMeta.fields,e.editData),e.editType="update",e.showCrudModal=!0):e.$Modal.warning({title:"提示",content:"只能选择一项信息更新"})},removeInfo:function(){var e=this,t=this;t.editData.recordId?t.$Modal.confirm({title:"提示",content:"<p>确认删除？</p>",onOk:function(){var r={crudId:t.crudId,query:t.editData.recordId};me.r(r).then(function(r){t.queryInfo(e,e.queryPartClone),t.editData={}}).catch(function(e){})},onCancel:function(){}}):this.$Modal.warning({title:"提示",content:"只能选择一项信息删除"})},enumsModify:function(e){var t=e.name,r=e.value;this.queryForm[t]=r}}},ve={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{margin:"10px"}},[r("Modal",{attrs:{"mask-closable":!1,closable:!1,scrollable:"",title:e.modalMeta.name,"ok-text":"保存",width:e.modalMeta.width},on:{"on-ok":e.submitData,"on-cancel":e.cancelSubmit},model:{value:e.showCrudModal,callback:function(t){e.showCrudModal=t},expression:"showCrudModal"}},[r("Form",{attrs:{model:e.queryForm,"label-width":100}},[e.modalMeta.tabFlag?r("Tabs",{attrs:{value:e.tabColList[0].code}},e._l(e.tabColList,function(t,n){return r("TabPane",{key:n,attrs:{label:t.name,name:t.code}},[r("div",{staticStyle:{"min-height":"100px","overflow-y":"auto","max-height":"600px",padding:"5px"}},e._l(t.colList,function(t,n){return r("Row",{key:n,attrs:{type:"flex",justify:"start",align:"top"}},e._l(t,function(t,n){return r("Col",{key:n,attrs:{span:24/Number.parseInt((e.modalMeta.columns||2)+"")}},["input"===t.dataSource.trim()?r("FormItem",{attrs:{label:t.title}},[r("Input",{staticStyle:{width:"200px"},attrs:{clearable:"",type:t.inputDef.formatType||"text",disabled:"update"===e.editType&&!t.editable,placeholder:t.title},model:{value:e.queryForm[t.key],callback:function(r){e.$set(e.queryForm,t.key,r)},expression:"queryForm[cItem.key]"}})],1):e._e(),e._v(" "),"enums"!==t.dataSource.trim()||t.enumDef.multiple?e._e():r("FormItem",{attrs:{label:t.title}},[r("Select",{staticStyle:{width:"200px"},attrs:{disabled:"update"===e.editType&&!t.editable,filterable:"",clearable:""},model:{value:e.queryForm[t.key],callback:function(r){e.$set(e.queryForm,t.key,r)},expression:"queryForm[cItem.key]"}},e._l(t.enumDef.enumsData,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                      "+e._s(t.label)+"\n                    ")])}))],1),e._v(" "),"enums"===t.dataSource.trim()&&t.enumDef.multiple?r("FormItem",{attrs:{label:t.title}},[r("multiple-select",{attrs:{disabled:"update"===e.editType&&!t.editable,selectData:t.enumDef.enumsData,referName:t.key},on:{"enums-modify":e.enumsModify}})],1):e._e(),e._v(" "),"sql"!==t.dataSource.trim()||t.sqlDef.multiple?e._e():r("FormItem",{attrs:{label:t.title}},[r("Select",{staticStyle:{width:"200px"},attrs:{disabled:"update"===e.editType&&!t.editable,filterable:"",clearable:""},model:{value:e.queryForm[t.key],callback:function(r){e.$set(e.queryForm,t.key,r)},expression:"queryForm[cItem.key]"}},e._l(t.sqlDef.queryData,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                      "+e._s(t.label)+"\n                    ")])}))],1),e._v(" "),"sql"===t.dataSource.trim()&&t.sqlDef.multiple?r("FormItem",{attrs:{label:t.title}},[r("multiple-select",{attrs:{disabled:"update"===e.editType&&!t.editable,selectData:t.sqlDef.queryData,referName:t.key},on:{"enums-modify":e.enumsModify}})],1):e._e(),e._v(" "),"date"===t.dataSource.trim()?r("FormItem",{attrs:{label:t.title}},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{value:e.queryForm[t.key],clearable:"",disabled:"update"===e.editType&&!t.editable,format:t.dateDef.format,type:t.dateDef.type,placeholder:t.title},on:{"on-change":function(r){e.queryForm[t.key]=r}}})],1):e._e()],1)}))}))])})):e._e()],1)],1),e._v(" "),e.showQueryPart?r("query-part",{staticStyle:{"margin-bottom":"-15px"},attrs:{pQueryData:e.queryData},on:{"btn-reset":e.resetInfo,"btn-search":e.searchInfo}}):e._e(),e._v(" "),r("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",justify:"start",align:"top"}},[r("Col",{attrs:{span:"24"}},[r("Card",{attrs:{padding:0,icon:"ios-list-outline"}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.tableDef.tableName||"|"))]),e._v(" "),r("div",{attrs:{slot:"extra"},slot:"extra"},[r("div",{staticStyle:{display:"inline-block","margin-top":"-5px"}},[r("ButtonGroup",{staticStyle:{display:"inline-block"}},[r("Button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addInfo}},[e._v("添加")]),e._v(" "),r("Button",{attrs:{type:"primary",icon:"trash-a"},on:{click:e.removeInfo}},[e._v("删除")]),e._v(" "),r("Button",{attrs:{type:"primary",icon:"edit"},on:{click:e.updateInfo}},[e._v("修改")])],1),e._v(" "),e.showSearch?r("i-table-plugin-search",{staticStyle:{margin:"0px 5px 0px 5px"},attrs:{"search-width":e.searchWidth,pluginTableData:e.tableDef.tableData,pluginTableColumns:e.tableDef.tableCol},on:{"update:pluginTableData":function(t){e.$set(e.tableDef,"tableData",t)},"update:pluginTableColumns":function(t){e.$set(e.tableDef,"tableCol",t)}}}):e._e()],1),e._v(" "),r("a",{staticStyle:{display:"inline-block"},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.exportInfo()}}},[r("Icon",{attrs:{type:"ios-upload-outline"}}),e._v("\n          导出\n        ")],1)]),e._v(" "),r("Table",{attrs:{columns:(e.tableDef.tableCol||[]).filter(function(e){return e.visible||e.fixShow}),data:e.tableDef.tableData,width:e.tableDef.width,height:e.tableDef.height,border:""},on:{"on-selection-change":e.tableSelectChange}}),e._v(" "),e.tableDef.pagenable?r("Row",{staticStyle:{margin:"10px 0px 10px 0px"}},[r("Col",{attrs:{span:"24"}},[r("Page",{staticStyle:{float:"right","margin-right":"20px"},attrs:{total:e.tableDef.tableData.length,"show-elevator":"","show-sizer":"","show-total":""}})],1)],1):e._e()],1)],1)],1)],1)},staticRenderFns:[]},ye={name:"Cruds",components:{CrudTableDefault:r("VU/8")(fe,ve,!1,function(e){r("5/Rt")},"data-v-0edba828",null).exports},data:function(){return{hasAuth:!0}},computed:U()({},Object(P.b)(["crudMenus"])),watch:{$route:function(e,t){var r=this.crudMenus.map(function(e){return e.path});r.findIndex(function(t){return t===e.path})<0?this.hasAuth=!1:this.hasAuth=!0}},methods:{}},be={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.$route.params.crudId&&e.hasAuth?r("crud-table-default",{attrs:{styleType:"primary",crudId:e.$route.params.crudId}}):e._e(),e._v(" "),e.hasAuth?e._e():r("h1",{staticStyle:{"margin-top":"20px"}},[e._v("无查阅此报表的权限")])],1)},staticRenderFns:[]},ge=r("VU/8")(ye,be,!1,function(e){r("sxCx")},"data-v-7d0dbbf2",null).exports,Ie={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view",{attrs:{id:"system-manager"}})},staticRenderFns:[]},_e=r("VU/8")({name:"SystemManager"},Ie,!1,function(e){r("m5QB")},"data-v-7977dccc",null).exports,we={name:"RoleTags",props:{tags:{type:String,default:function(){return""}},propAllTags:{type:Array,default:function(){return[]}}},computed:{allTags:function(){var e=this.propAllTags,t=this.tags.split(",");return e.forEach(function(e,r,n){e.havThis=!1;var a=t.findIndex(function(t){return t===e.roleId+""});a>=0&&(e.havThis=!0)}),e}},data:function(){return{}}},Ee={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%",display:"inline-block"}},[e._l(e.allTags,function(t,n){return t.havThis?r("Tag",{key:n,attrs:{name:t.roleId,color:"green"}},[e._v(e._s(t.roleName))]):e._e()}),e._v(" "),e._t("btn")],2)},staticRenderFns:[]},ke=r("VU/8")(we,Ee,!1,function(e){r("soZy")},"data-v-39a0e496",null).exports;o.default.component("role-tags",ke);var Se={name:"UserManager",mounted:function(){var e=this;M.userAll.r().then(function(t){var r=t;Array.isArray(r)&&(e.$data.tableData=r)}).catch(function(e){})},computed:U()({},Object(P.b)(["authRoles"])),methods:{cancelSubmit:function(){},allUserInfo:function(){var e=this;M.userAll.r().then(function(t){var r=t;Array.isArray(r)&&(e.$data.tableData=r)}).catch(function(e){})},submitEditRole:function(){function e(){t.$data.userKey?M.userQuery.r({keyword:t.$data.userKey}).then(function(e){var r=e;Array.isArray(r)&&(t.$data.tableData=r)}).catch(function(e){}):M.userAll.r().then(function(e){var r=e;Array.isArray(r)&&(t.$data.tableData=r)}).catch(function(e){})}var t=this,r=t.editUser.userId,n=t.editUser.addIds,a=t.editUser.delIds;n&&!a?M.userAdd.r({userId:r,roles:n}).then(function(r){e(),t.$Message.success({content:"分配角色成功！"})}).catch(function(e){t.$Message.error({content:"分配角色失败！"})}):!n&&a?M.userDelete.r({userId:r,roles:a}).then(function(r){e(),t.$Message.success({content:"分配角色成功！"})}).catch(function(e){t.$Message.error({content:"分配角色失败！"})}):n&&a&&d.a.all([M.userAdd.r({userId:r,roles:n}),M.userDelete.r({userId:r,roles:a})]).then(d.a.spread(function(r,n){e(),t.$Message.success({content:"分配角色成功！"})}))},tableRoleSelectChange:function(e){var t=[],r=[];this.editUser.userRoleIds&&(r=this.editUser.userRoleIds.split(",")),e.forEach(function(e){var n=r.findIndex(function(t){return t===e.roleId+""});n>=0?r.splice(n,1):t.push(e.roleId)}),this.editUser.addIds=t.join(","),this.editUser.delIds=r.join(",")},handleSearch:function(){var e=this;e.$data.userKey||e.$Modal.warning({title:"提示",content:"查询信息不能为空！"}),M.userQuery.r({keyword:e.$data.userKey}).then(function(t){var r=t;Array.isArray(r)&&(e.$data.tableData=r)}).catch(function(e){})},editRole:function(e,t){var r=this;r.$data.editUser.userId=t,r.$data.editUser.userRoleIds="",r.$data.tableRoleData=g(r.authRoles);var n=[];e&&(n=e.split(","),r.$data.editUser.userRoleIds=e),r.$data.tableRoleData.forEach(function(e,t,r){e._checked=!1,n.findIndex(function(t){return t===e.roleId+""})>=0&&(e._checked=!0)}),r.showTagsModal=!0}},data:function(){var e=this;return{userAuth:M,showTagsModal:!1,userKey:"",editUser:{userRoleIds:"",userId:"",delIds:"",addIds:""},tableData:[],tableRoleData:[],tableRoleColumns:[{width:60,type:"selection"},{title:"角色名称",key:"roleName",align:"center",width:100},{title:"角色描述",key:"roleDesc",align:"center",width:400}],tableColumns:[{title:"姓名",key:"realName",align:"center",width:100},{title:"用户名",key:"userName",align:"center",width:100},{title:"部门",key:"department",align:"center",width:150},{title:"邮箱",key:"email",align:"center",width:200},{title:"分配角色",align:"center",width:600,render:function(t,r){return t("span",[t("role-tags",{props:{tags:r.row.userRoleIds||r.row.roleIds,propAllTags:e.authRoles},style:{display:"inline-block",width:"80%"}}),t("Button",{props:{icon:"edit",type:"dashed",size:"small"},style:{display:"inline-block",width:"20%"},on:{click:function(){e.editRole(r.row.userRoleIds||r.row.roleIds,r.row.userId)}}},"分配角色")])}}]}}},De={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Modal",{attrs:{closable:!1,"mask-closable":!1,title:"分配角色",scrollable:"",width:"600"},on:{"on-ok":e.submitEditRole,"on-cancel":e.cancelSubmit},model:{value:e.showTagsModal,callback:function(t){e.showTagsModal=t},expression:"showTagsModal"}},[r("Table",{ref:"roleTable",attrs:{columns:e.tableRoleColumns,data:e.tableRoleData,height:"400"},on:{"on-selection-change":e.tableRoleSelectChange}})],1),e._v(" "),r("Row",{staticStyle:{"margin-top":"20px"}},[r("Col",{attrs:{span:"6"}},[r("Input",{staticStyle:{width:"300px"},attrs:{size:"large",icon:"ios-search",placeholder:"用户名/姓名/手机号/部门/邮箱"},on:{"on-click":e.handleSearch,"on-enter":e.handleSearch},model:{value:e.userKey,callback:function(t){e.userKey=t},expression:"userKey"}})],1),e._v(" "),r("Col",{attrs:{span:"3"}},[r("Button",{attrs:{type:"primary",icon:"ios-loop-strong"},on:{click:e.allUserInfo}},[e._v("当前全部用户")])],1)],1),e._v(" "),r("Table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.tableColumns,data:e.tableData,height:"600",border:"",stripe:""}})],1)},staticRenderFns:[]},xe=r("VU/8")(Se,De,!1,function(e){r("fd0r")},"data-v-27f15efc",null).exports,Me={name:"RoleManager",methods:{refreshInfo:function(){this.$store.dispatch("allRoles"),this.$store.dispatch("allResource")},tableSelectChange:function(e){1===e.length?this.$data.nowItem=g(e[0]):this.$data.nowItem={}},submitRoles:function(){var e=this,t={};t.roleName=this.roleInfo.roleName,t.roleCode=this.roleInfo.roleCode,t.roleDesc=this.roleInfo.roleDesc,b(this.roleInfo),t.roleName&&t.roleCode?("add"===this.subAction&&M.rolesAdd.r(t).then(function(t){e.$store.dispatch("allRoles"),e.$Modal.success({title:"提示",content:"添加成功"})}).catch(function(e){}),"edit"===this.subAction&&(t.roleId=this.nowItem.roleId,M.rolesUpdate.r(t).then(function(t){e.$store.dispatch("allRoles"),e.$Modal.success({title:"提示",content:"保存成功"}),e.roleInfo={}}).catch(function(e){}))):this.$Modal.warning({title:"提示",content:"提交失败，缺少必填信息"})},submitRes:function(){var e=this,t=[],r=g(e.nowTreeArr);e.nowTreeArr=[],e.$refs.resTree.getCheckedNodes().forEach(function(e){var n=r.findIndex(function(t){return t===e.resourceId});if(n>=0){r.splice(n,1);var a=r.findIndex(function(t){return t===e.resourceParentId});a>=0&&r.splice(a,1)}else t.push(e.resourceId)});var n=t.length>0,a=r.length>0,o={roleId:e.nowItem.roleId,resources:t.join(",")},s={roleId:e.nowItem.roleId,resources:r.join(",")};n&&!a?M.rrAdd.r(o).then(function(t){e.$Message.success({content:"分配资源成功"})}):!n&&a?M.rrDelete.r(s).then(function(t){e.$Message.success({content:"分配资源成功"})}):n&&a&&d.a.all([M.rrAdd.r(o),M.rrDelete.r(s)]).then(d.a.spread(function(t,r){e.$Message.success({content:"分配资源成功"})}))},cancelSubmitRole:function(){this.roleInfo={}},cancelSubmitRes:function(){this.nowTreeArr=[]},addInfo:function(){b(this.roleInfo),this.roleInfo.roleName="",this.roleInfo.roleCode="",this.roleInfo.roleDesc="",this.subAction="add",this.showRoleModal=!0},updateInfo:function(){b(this.roleInfo),this.nowItem.roleId?(this.roleInfo.roleName=this.nowItem.roleName,this.roleInfo.roleCode=this.nowItem.roleCode,this.roleInfo.roleDesc=this.nowItem.roleDesc,this.subAction="edit",this.showRoleModal=!0):this.$Modal.warning({title:"提示",content:"只能选择一项信息更改"})},removeInfo:function(){var e=this,t=e.nowItem.roleId;t?this.$Modal.confirm({title:"提示",content:"确认删除？",onOk:function(){M.rolesDelete.r(t).then(function(t){e.$store.dispatch("allRoles"),b(e.nowItem),e.$Message.success({title:"提示",content:"删除成功"})})}}):this.$Modal.warning({title:"提示",content:"只能选择一项信息删除"})},checkTreeNode:function(e){},distributeRes:function(){var e=this;e.treeData=[],e.nowTreeArr=[];var t=e.nowItem.roleId,r=g(e.authResource);t?(e.treeTitle=e.nowItem.roleName+"-权限分配",M.rrGet.r(t).then(function(t){var n=t.resources||t;if(Array.isArray(n)){r.forEach(function(t){var r=n.findIndex(function(e){return e.resourceId===t.resourceId}),a=e.childNodeArr.findIndex(function(e){return e===t.resourceId});t.checked=!1,r>=0&&e.nowTreeArr.push(t.resourceId),r>=0&&a>=0&&(t.checked=!0)});var a=I(r,"resourceParentId","resourceId","children");e.treeData=[{expand:!0,selected:!0,resourceType:0,resourceName:"报表系统",title:"报表系统",resourceUri:"URL路径",resourcePermission:"权限字符串",resourceDesc:"描述",children:a}],e.showResModal=!0}})):e.$Modal.warning({title:"提示",content:"只能选择一项信息更改"})}},computed:U()({},Object(P.b)(["authRoles","authResource"]),{childNodeArr:function(){var e=[],t=g(this.authResource);return t.forEach(function(r){t.findIndex(function(e){return e.resourceParentId===r.resourceId})<0&&e.push(r.resourceId)}),e}}),data:function(){return{userAuth:M,showRoleModal:!1,showResModal:!1,treeTitle:"权限分配",treeData:[],nowTreeArr:[],subAction:"",nowItem:{},roleInfo:{roleName:"",roleCode:"",roleDesc:""},tableColumns:[{width:60,type:"selection",fixShow:!0},{title:"角色名称",key:"roleName",align:"center",visible:!0,width:150},{title:"角色代码",key:"roleCode",align:"center",visible:!0,width:200},{title:"角色描述",key:"roleDesc",align:"center",visible:!0,width:300}]}}},Ae={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"margin-top":"20px"}},[r("Modal",{attrs:{closable:!1,"mask-closable":!1,title:"角色信息",scrollable:"",width:"500","ok-text":"提交"},on:{"on-ok":e.submitRoles,"on-cancel":e.cancelSubmitRole},model:{value:e.showRoleModal,callback:function(t){e.showRoleModal=t},expression:"showRoleModal"}},[r("Form",{attrs:{model:e.roleInfo,"label-width":100}},[r("FormItem",{attrs:{label:"角色名称",required:""}},[r("Input",{attrs:{size:"large",type:"text",placeholder:"角色名称"},model:{value:e.roleInfo.roleName,callback:function(t){e.$set(e.roleInfo,"roleName",t)},expression:"roleInfo.roleName"}})],1),e._v(" "),r("FormItem",{attrs:{label:"角色代码",required:""}},[r("Input",{attrs:{size:"large",type:"text",placeholder:"角色代码"},model:{value:e.roleInfo.roleCode,callback:function(t){e.$set(e.roleInfo,"roleCode",t)},expression:"roleInfo.roleCode"}})],1),e._v(" "),r("FormItem",{attrs:{label:"角色描述"}},[r("Input",{attrs:{size:"large",type:"textarea",placeholder:"角色描述..."},model:{value:e.roleInfo.roleDesc,callback:function(t){e.$set(e.roleInfo,"roleDesc",t)},expression:"roleInfo.roleDesc"}})],1)],1)],1),e._v(" "),r("Modal",{attrs:{closable:!1,"mask-closable":!1,title:e.treeTitle,scrollable:"",width:"500","ok-text":"提交"},on:{"on-ok":e.submitRes,"on-cancel":e.cancelSubmitRes},model:{value:e.showResModal,callback:function(t){e.showResModal=t},expression:"showResModal"}},[r("div",{staticStyle:{"min-height":"400px","overflow-y":"auto","max-height":"500px"}},[r("Tree",{ref:"resTree",attrs:{data:e.treeData,"show-checkbox":"",multiple:""},on:{"on-check-change":e.checkTreeNode}})],1)]),e._v(" "),r("ButtonGroup",{staticStyle:{"padding-bottom":"10px"}},[r("Button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addInfo}},[e._v("新增")]),e._v(" "),r("Button",{attrs:{type:"primary",icon:"edit"},on:{click:e.updateInfo}},[e._v("修改")]),e._v(" "),r("Button",{attrs:{type:"primary",icon:"trash-a"},on:{click:e.removeInfo}},[e._v("删除")]),e._v(" "),r("Button",{attrs:{type:"primary",icon:"key"},on:{click:e.distributeRes}},[e._v("分配资源")]),e._v(" "),r("Button",{attrs:{type:"primary",icon:"ios-loop-strong"},on:{click:e.refreshInfo}},[e._v("刷新")])],1),e._v(" "),r("Table",{attrs:{columns:e.tableColumns.filter(function(e){return e.visible||e.fixShow}),data:e.authRoles,height:"600",border:"",stripe:""},on:{"on-selection-change":e.tableSelectChange}})],1)},staticRenderFns:[]},Re=r("VU/8")(Me,Ae,!1,function(e){r("O9va")},"data-v-9cfcbbbc",null).exports,Te={name:"AuthManager",computed:U()({},Object(P.b)(["authResource"]),{treeData:function(){return[{expand:!0,resourceType:0,resourceName:"报表系统",parentName:"报表系统",resourceUri:"URL路径",resourcePermission:"权限字符串",resourceDesc:"描述",children:I(this.authResource,"resourceParentId","resourceId","children")}]}}),methods:{refreshInfo:function(){this.$store.dispatch("allResource")},addNode:function(e){var t=this;b(t.authInfo),t.authInfo.resourceType=1,t.authInfo.resourceName="",t.authInfo.resourceUri="",t.authInfo.resourcePermission="",t.authInfo.resourceDesc="",t.authInfo.resourceParentId=e.resourceParentId,t.authInfo.resourceId=e.resourceId,t.authInfo.parentName=e.parentName,t.subAction="add",t.showAuthModal=!0},editNode:function(e){var t=this;b(t.authInfo),t.authInfo.resourceType=e.resourceType,t.authInfo.resourceName=e.resourceName,t.authInfo.resourceUri=e.resourceUri,t.authInfo.resourcePermission=e.resourcePermission,t.authInfo.resourceDesc=e.resourceDesc,t.authInfo.resourceParentId=e.resourceParentId,t.authInfo.resourceId=e.resourceId,t.authInfo.parentName=e.parentName,t.subAction="edit",t.showAuthModal=!0},deleteNode:function(e){var t=this;t.$Modal.confirm({title:"提示",content:"确认删除？",onOk:function(){M.resourceDelete.r(e.resourceId).then(function(e){t.$store.dispatch("allResource"),t.$Message.success({title:"提示",content:"删除成功"})})}})},submitAuth:function(){var e=this,t={};t.resourceName=this.authInfo.resourceName,t.resourceType=this.authInfo.resourceType,t.resourceUri=this.authInfo.resourceUri,t.resourcePermission=this.authInfo.resourcePermission,t.resourceDesc=this.authInfo.resourceDesc,t.resourceName?("add"===this.subAction&&(t.resourceParentId=this.authInfo.resourceId,b(this.authInfo),M.resourceAdd.r(t).then(function(t){e.$store.dispatch("allResource"),e.$Modal.success({title:"提示",content:"保存成功"})})),"edit"===this.subAction&&(t.resourceId=this.authInfo.resourceId,b(this.authInfo),M.resourceUpdate.r(t).then(function(t){e.$store.dispatch("allResource"),e.$Modal.success({title:"提示",content:"保存成功"})}))):this.$Modal.warning({title:"提示",content:"保存失败，缺少必填信息"})},cancelSubmit:function(){b(this.authInfo)},renderContent:function(e,t){var r=this,n=(t.root,t.node,t.data),a=1===n.resourceType,o=2===n.resourceType,s=a?"ios-folder-outline":o?"ios-paper-outline":"ios-folder-outline",i=a?"菜单":o?"权限":"类型",u=e("Button",{props:te()({},this.buttonProps,{icon:"ios-plus-empty",type:"primary"}),on:{click:function(){r.addNode(n)}}},"增加子节点"),l=e("Button",{props:te()({},this.buttonProps,{icon:"edit",type:"warning"}),on:{click:function(){r.editNode(n)}}},"修改"),c=e("Button",{props:te()({},this.buttonProps,{icon:"ios-minus-empty",type:"error"}),on:{click:function(){r.deleteNode(n)}}},"删除"),d=a?Array.isArray(n.children)&&n.children?[u,l]:[u,l,c]:o?[l,c]:[u];return e("span",{style:{display:"inline-block",width:"100%",marginBottom:"6px",paddingBottom:"6px",borderBottom:"1px solid #e9e9e9"}},[e("span",{style:{width:"20%",marginRight:"30px"}},[e("Icon",{props:{type:s},style:{marginRight:"8px"}}),e("span",n.resourceName)]),e("span",{style:{display:"inline-block",float:"right",width:"80%"}},[e("Row",[e("Col",{props:{span:2}},i),e("Col",{props:{span:4}},n.resourceUri||"..."),e("Col",{props:{span:6}},n.resourcePermission||"..."),e("Col",{props:{span:6}},n.resourceDesc||"..."),e("Col",{props:{span:6}},[e("ButtonGroup",d)])])])])}},data:function(){return{showAuthModal:!1,subAction:"",resourceTypeEnum:[{label:"菜单",value:1},{label:"权限",value:2}],authInfo:{resourceId:"",resourceType:1,resourceName:"",resourceUri:"",resourcePermission:"",resourceDesc:"",resourceParentId:"",parentName:""},buttonProps:{size:"small"}}}},Ce={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"margin-top":"20px"}},[r("Modal",{attrs:{closable:!1,"mask-closable":!1,title:"编辑权限资源",scrollable:"",width:"600"},on:{"on-ok":e.submitAuth,"on-cancel":e.cancelSubmit},model:{value:e.showAuthModal,callback:function(t){e.showAuthModal=t},expression:"showAuthModal"}},[r("Form",{attrs:{model:e.authInfo,"label-width":100}},[r("FormItem",{directives:[{name:"show",rawName:"v-show",value:"add"===e.subAction,expression:"subAction==='add'"}],attrs:{label:"上级菜单"}},[r("Input",{attrs:{type:"text",disabled:""},model:{value:e.authInfo.parentName,callback:function(t){e.$set(e.authInfo,"parentName",t)},expression:"authInfo.parentName"}})],1),e._v(" "),r("FormItem",{attrs:{label:"资源名称"}},[r("Input",{attrs:{type:"text",required:"",placeholder:"资源名称"},model:{value:e.authInfo.resourceName,callback:function(t){e.$set(e.authInfo,"resourceName",t)},expression:"authInfo.resourceName"}})],1),e._v(" "),r("FormItem",{attrs:{label:"资源类型"}},[r("Select",{model:{value:e.authInfo.resourceType,callback:function(t){e.$set(e.authInfo,"resourceType",t)},expression:"authInfo.resourceType"}},e._l(e.resourceTypeEnum,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}))],1),e._v(" "),r("FormItem",{attrs:{label:"URL路径"}},[r("Input",{attrs:{type:"text",placeholder:"URL路径"},model:{value:e.authInfo.resourceUri,callback:function(t){e.$set(e.authInfo,"resourceUri",t)},expression:"authInfo.resourceUri"}})],1),e._v(" "),r("FormItem",{attrs:{label:"权限字符串"}},[r("Input",{attrs:{type:"text",placeholder:"权限字符串"},model:{value:e.authInfo.resourcePermission,callback:function(t){e.$set(e.authInfo,"resourcePermission",t)},expression:"authInfo.resourcePermission"}})],1),e._v(" "),r("FormItem",{attrs:{label:"描述"}},[r("Input",{attrs:{type:"text",placeholder:"描述..."},model:{value:e.authInfo.resourceDesc,callback:function(t){e.$set(e.authInfo,"resourceDesc",t)},expression:"authInfo.resourceDesc"}})],1)],1)],1),e._v(" "),r("Button",{attrs:{type:"primary",icon:"ios-loop-strong"},on:{click:e.refreshInfo}},[e._v("刷新")]),e._v(" "),r("Tree",{attrs:{data:e.treeData,render:e.renderContent}})],1)},staticRenderFns:[]},$e=[{path:"/",name:"首页",component:F,children:[{path:"/reports/:reportId",name:"reports",meta:{name:"报表",path:"/reports",metaParent:"/reports",bread:"/报表",icon:"ios-paper-outline",paths:[]},component:le},{path:"/crud/:crudId",name:"crud",meta:{name:"CRUD",path:"/crud",metaParent:"/crud",bread:"/CRUD",icon:"ios-paper-outline",paths:[]},component:ge},{path:"/system-manager",name:"system-manager",meta:{name:"系统管理",path:"/system-manager",metaParent:"/",bread:"/监控管理",icon:"ios-gear-outline"},component:_e,children:[{path:"user-manager",name:"user-manager",meta:{name:"用户管理",path:"/system-manager/user-manager",metaParent:"/system-manager",bread:"/监控管理/用户管理",icon:"ios-people-outline"},component:xe},{path:"role-manager",name:"role-manager",meta:{name:"角色管理",path:"/system-manager/role-manager",metaParent:"/system-manager",bread:"/监控管理/角色管理",icon:"ios-settings"},component:Re},{path:"auth-manager",name:"auth-manager",meta:{name:"权限管理",path:"/system-manager/auth-manager",metaParent:"/system-manager",bread:"/监控管理/权限管理",icon:"ios-settings"},component:r("VU/8")(Te,Ce,!1,function(e){r("h4O7")},"data-v-62ca8884",null).exports}]}]}],Ne=void 0,Fe={data:function(){return{menuData:null,userData:null}},methods:{getPermission:function(e){var t={};return Array.isArray(e.resources)&&e.resources.forEach(function(e,r){var n=e.method.toLowerCase()+","+e.url;t[n]=!0}),t},setInterceptor:function(e){var t=this;Ne=k.interceptors.request.use(function(r){var n=r.url.replace(r.baseURL,"").replace("/GET","").replace("/POST","").split("?")[0],a=n.match(/^(\/[^\/]+\/)[^\/]+$/);a&&(n=a[1]+"**");var o=n.match(/^\/[^\/]+\/([^\/]+)\/[^\/]+$/);return o&&(n=n.replace(o[1],"*")),e[r.method+","+n]?r:(t.$Message.warning({content:"无访问权限！"}),l.a.reject(new Error({message:"no permission"})))})},getRoutes:function(e){var t=[],r={};return function e(t,n){t.map(function(t){if(t.route){var a=((n?n+"/":"")+t.route).replace(/^\//,"");r["/"+a]=!0,Array.isArray(t.children)&&e(t.children,t.route)}})}(g(e)),this.$root.hashMenus=r,function e(n,a){var o=[];if(n.forEach(function(t){var n=(a?a+"/":"")+t.path;r[n]&&(Array.isArray(t.children)&&(t.children=e(t.children,t.path)),o.push(t))}),a)return o;t=t.concat(o)}(g($e[0].children)),t},extendRoutes:function(e){var t=this,r=g(e);r.map(function(e){return e.children&&(e.meta||(e.meta={}),e.meta.children=e.children),e.beforeEnter=function(e,r,n){e.path.indexOf("reports")>=0||e.path.indexOf("crud")>=0?n():t.$root.hashMenus[e.path]?n():n("/401")},e});var n=g($e);n[0].children=r,t.$router.addRoutes(n.concat([{path:"*",redirect:"/404"}]))},signin:function(e){var t=this,r=this,n={};if(n.token=v("token"),!n.token)return r.$router.push({path:"/login",query:{from:r.$router.currentRoute.path}});k.defaults.headers.common.Authorization="Bearer "+n.token,M.authPermissions.r().then(function(n){if(n.menus&&n.menus.length>0){var a=function(e){var t,r=[];return"array"===y(e.perms)&&e.perms.forEach(function(e){var t={method:"",url:""},n=(e.code||"").split(":");2===n.length&&(t.method=n[1].toUpperCase(),t.url=e.url),r.push(t)}),"array"===y(e.menus)&&(e.menus.forEach(function(t){var r=e.menus.find(function(e){return e.id===t.parentId});r&&(t.parent=r.code),t.idx=t.code,t.route=t.code}),e.menus.forEach(function(e){e.id=e.idx})),t=e.menus,{resources:r,menus:t}}(n),s=function(e,t){var r=[],n=Array.isArray(e)?e.map(function(e){return e.id}):[];return t=t||"parent",e.forEach(function(e,a){e[t]&&e[t]!==e.id?Array.isArray(n)&&-1===n.findIndex(function(r){return r===e[t]})&&r.push(e):(delete e[t],r.push(g(e)))}),function r(n){Array.isArray(n)&&n.length&&n.forEach(function(n){e.forEach(function(e){n.id===e[t]&&(n.children?n.children.push(e):n.children=[e])}),n.children&&r(n.children)})}(r),r}(a.menus),i=r.getPermission(a),u=r.getRoutes(s);u&&u.length||(v("token",""),r.$Message.warning({content:"账号无访问权限，请联系管理员！"})),u.forEach(function(e){if("/reports/:reportId"===e.path){var r=s.filter(function(e){return"/reports/:reportId"===e.id})[0].children;t.$store.dispatch("reportsMenus",r),r.forEach(function(e){e.path=e.url,e.bread=e.name,e.icon="ios-list-outline",e.metaParent="/crud"}),e.meta.paths=r}if("/crud/:crudId"===e.path){var n=s.filter(function(e){return"/crud/:crudId"===e.id})[0].children;t.$store.dispatch("crudMenus",n),n.forEach(function(e){e.path=e.url,e.bread=e.name,e.icon="ios-list-outline",e.metaParent="/crud"}),e.meta.paths=n}}),r.extendRoutes(u),r.menuData=u,r.userData=a,r.username=v("username"),r.token=v("token"),o.default.prototype.$_has=function(e){var t=[],r=!0;return Array.isArray(e)?e.forEach(function(e){t=t.concat(e.p)}):t=t.concat(e.p),t.forEach(function(e){if(!i[e])return r=!1}),r},"function"==typeof e&&e()}else t.$router.replace({path:"/login"})})},loginDirect:function(e){var t=this;this.signin(function(){t.$router.replace({path:e||"/"})})},logoutDirect:function(){v("token",""),v("username",""),this.username="",this.token="",k.interceptors.request.eject(Ne),this.$root.hashMenus={},location.reload(),k.defaults.headers.common.Authorization="",this.$router.replace({path:"/login"})}},created:function(e){this.$store.dispatch("allResource"),this.$store.dispatch("allRoles"),this.signin()}},qe={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view",{attrs:{id:"app"},on:{login:this.loginDirect,logout:this.logoutDirect}})},staticRenderFns:[]},Ue=r("VU/8")(Fe,qe,!1,function(e){r("rj/M")},null,null).exports,Pe=r("/ocq"),Le={state:{sidebar:{opened:!+v("sidebarStatus"),minOpen:!1},username:""},mutations:{TOGGLE_SIDEBAR:function(e){document.documentElement.clientWidth<=600?(e.sidebar.minOpen=!e.sidebar.minOpen,e.sidebar.opened=!1,v("sidebarStatus",0)):(e.sidebar.opened?v("sidebarStatus",1):v("sidebarStatus",0),e.sidebar.opened=!e.sidebar.opened)},CLOSE_SLIDEBAR:function(e){v("sidebarStatus",0),e.sidebar.opened=!1,e.sidebar.minOpen=!1},OPEN_SLIDEBAR:function(e){v("sidebarStatus",1),e.sidebar.opened=!0},USERNAME:function(e,t){e.username=t}},actions:{ToggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")}}},Be={p:["get,dataDictionarys/**"],r:function(e){return k.get("/dataDictionarys/"+e)}},Oe={state:{departmentEnum:[],investmentEnum:[],researchEnum:[],subsidiaryEnum:[],participateEnum:[],relationTypeEnum:[],intoPointEnum:[],outPointEnum:[],endPointEnum:[],reportGradeEnum:[],ruleParamTypeEnum:[],businessSideEnum:[],assetBusinessTypeEnum:[],crossStatusEnum:[]},mutations:{DEPARTMENT_ENUM:function(e,t){e.departmentEnum=[],t.forEach(function(t,r){e.departmentEnum.push({label:t.value,value:t.value})})},INVESTMENT_ENUM:function(e,t){e.investmentEnum=[],t.forEach(function(t,r){e.investmentEnum.push({label:t.value,value:t.value})})},RESEARCH_ENUM:function(e,t){e.researchEnum=[],t.forEach(function(t,r){e.researchEnum.push({label:t.value,value:t.value})})},SUBSIDIARY_ENUM:function(e,t){e.subsidiaryEnum=[],t.forEach(function(t,r){e.subsidiaryEnum.push({label:t.value,value:t.value})})},ASSET_BUSINESS_TYPE_ENUM:function(e,t){e.assetBusinessTypeEnum=[],t.forEach(function(t,r){e.assetBusinessTypeEnum.push({label:t.value,value:t.value})})},PARTICIPATE_ENUM:function(e,t){e.participateEnum=[],t.forEach(function(t,r){e.participateEnum.push({label:t.value,value:t.value})})},RELATION_TYPE_ENUM:function(e,t){e.relationTypeEnum=[],t.forEach(function(t,r){e.relationTypeEnum.push({label:t.value,value:t.value})})},INTO_POINT_ENUM:function(e,t){e.intoPointEnum=[],t.forEach(function(t,r){e.intoPointEnum.push({label:t.value,value:t.value})})},OUT_POINT_ENUM:function(e,t){e.outPointEnum=[],t.forEach(function(t,r){e.outPointEnum.push({label:t.value,value:t.value})})},END_POINT_ENUM:function(e,t){e.endPointEnum=[],t.forEach(function(t,r){e.endPointEnum.push({label:t.value,value:t.value})})},REPORT_GRADE_ENUM:function(e,t){e.reportGradeEnum=[],t.forEach(function(t,r){e.reportGradeEnum.push({label:t.value,value:t.value})})},RULE_PARAM_TYPE_ENUM:function(e,t){e.ruleParamTypeEnum=[],t.forEach(function(t,r){e.ruleParamTypeEnum.push({label:t.value,value:t.value})})},BUSINESS_SIDE_ENUM:function(e,t){e.businessSideEnum=[],t.forEach(function(t,r){e.businessSideEnum.push({label:t.value,value:t.value})})},CROSS_STATUS_ENUM:function(e,t){e.crossStatusEnum=[],t.forEach(function(t,r){e.crossStatusEnum.push({label:t.value,value:t.value})})}},actions:{departmentEnum:function(e){var t=e.commit;Be.r("department").then(function(e){var r=e;Array.isArray(r)&&t("DEPARTMENT_ENUM",r)})},investmentEnum:function(e){var t=e.commit;Be.r("investment_business_type").then(function(e){var r=e;Array.isArray(r)&&t("INVESTMENT_ENUM",r)})},researchEnum:function(e){var t=e.commit;Be.r("research_business_type").then(function(e){var r=e;Array.isArray(r)&&t("RESEARCH_ENUM",r)})},subsidiaryEnum:function(e){var t=e.commit;Be.r("subsidiary_business_type").then(function(e){var r=e;Array.isArray(r)&&t("SUBSIDIARY_ENUM",r)})},assetBusinessTypeEnum:function(e){var t=e.commit;Be.r("asset_business_type").then(function(e){var r=e;Array.isArray(r)&&t("ASSET_BUSINESS_TYPE_ENUM",r)})},participateEnum:function(e){var t=e.commit;Be.r("participate_item_form").then(function(e){var r=e;Array.isArray(r)&&t("PARTICIPATE_ENUM",r)})},relationTypeEnum:function(e){var t=e.commit;Be.r("related_type").then(function(e){var r=e;Array.isArray(r)&&t("RELATION_TYPE_ENUM",r)})},intoPointEnum:function(e){var t=e.commit;Be.r("intoList_point").then(function(e){var r=e;Array.isArray(r)&&t("INTO_POINT_ENUM",r)})},outPointEnum:function(e){var t=e.commit;Be.r("outList_point").then(function(e){var r=e;Array.isArray(r)&&t("OUT_POINT_ENUM",r)})},endPointEnum:function(e){var t=e.commit;Be.r("end_point").then(function(e){var r=e;Array.isArray(r)&&t("END_POINT_ENUM",r)})},reportGradeEnum:function(e){var t=e.commit;Be.r("report_rating").then(function(e){var r=e;Array.isArray(r)&&t("REPORT_GRADE_ENUM",r)})},ruleParamTypeEnum:function(e){var t=e.commit;Be.r("rule_parameter").then(function(e){var r=e;Array.isArray(r)&&t("RULE_PARAM_TYPE_ENUM",r)})},businessSideEnum:function(e){var t=e.commit;Be.r("business_side").then(function(e){var r=e;Array.isArray(r)&&t("BUSINESS_SIDE_ENUM",r)})},crossStatusEnum:function(e){var t=e.commit;Be.r("cross_status").then(function(e){var r=e;Array.isArray(r)&&t("CROSS_STATUS_ENUM",r)})}},getters:{departmentEnum:function(e){return e.departmentEnum},investmentEnum:function(e){return e.investmentEnum},researchEnum:function(e){return e.researchEnum},subsidiaryEnum:function(e){return e.subsidiaryEnum},assetBusinessTypeEnum:function(e){return e.assetBusinessTypeEnum},participateEnum:function(e){return e.participateEnum},relationTypeEnum:function(e){return e.relationTypeEnum},intoPointEnum:function(e){return e.intoPointEnum},outPointEnum:function(e){return e.outPointEnum},endPointEnum:function(e){return e.endPointEnum},reportGradeEnum:function(e){return e.reportGradeEnum},ruleParamTypeEnum:function(e){return e.ruleParamTypeEnum},businessSideEnum:function(e){return e.businessSideEnum},crossStatusEnum:function(e){return e.crossStatusEnum}}},je={state:{authResource:[],authRoles:[],reportsMenus:[],crudMenus:[]},mutations:{RESOURCE:function(e,t){e.authResource=t},ROLES:function(e,t){e.authRoles=t},REPORTS_MENUS:function(e,t){e.reportsMenus=t},CRUD_MENUS:function(e,t){e.crudMenus=t}},getters:{authResource:function(e){return e.authResource},authRoles:function(e){return e.authRoles},reportsMenus:function(e){return e.reportsMenus},crudMenus:function(e){return e.crudMenus}},actions:{allResource:function(e){var t=e.commit;M.resourceAll.r().then(function(e){Array.isArray(e)&&t("RESOURCE",e)})},allRoles:function(e){var t=e.commit;M.rolesAll.r().then(function(e){Array.isArray(e)&&t("ROLES",e)})},reportsMenus:function(e,t){(0,e.commit)("REPORTS_MENUS",t)},crudMenus:function(e,t){(0,e.commit)("CRUD_MENUS",t)}}};o.default.use(P.a);var Ge=new P.a.Store({modules:{app:Le,enums:Oe,appAuth:je}}),ze={name:"Login",data:function(){return{pageTitle:"报表系统",isBtnLoading:!1,loginUser:{username:"",password:""}}},created:function(){sessionStorage.clear()},computed:{btnText:function(){return this.isBtnLoading?"登录中...":"登录"}},mounted:function(){},methods:{login:function(){var e=this;if(e.isBtnLoading=!0,""===e.loginUser.username||""===e.loginUser.password)return e.$Message.warning("用户名或密码不能为空"),void(e.isBtnLoading=!1);v("token","test"),v("username",e.loginUser.username);var t,r={username:e.loginUser.username,password:e.loginUser.password,appcode:"wall-app"};(t=r,d.a.post("http://192.168.202.201:9968/jwt/v1/auth/login",t,{headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}})).then(function(t){e.isBtnLoading=!1;var n=t.data.access_token;n?(v("token",n),v("username",r.username),e.$emit("login",e.$router.currentRoute.query.from)):e.$Message.error(t.data.message||"用户名或密码不正确！！！")}).catch(w)}},components:{}},Ve={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-page"},[r("Card",{staticClass:"login-box",attrs:{"dis-hover":!0,bordered:!1}},[r("div",{staticClass:"login-logo"},[e._v("\n      "+e._s(e.pageTitle)+"\n    ")]),e._v(" "),r("Form",{ref:e.loginUser,attrs:{model:e.loginUser}},[r("FormItem",{attrs:{prop:"username"}},[r("Input",{attrs:{autofocus:!0,size:"large",type:"text",placeholder:"请输入账号"},model:{value:e.loginUser.username,callback:function(t){e.$set(e.loginUser,"username",t)},expression:"loginUser.username"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"password"}},[r("Input",{attrs:{size:"large",type:"password",placeholder:"请输入密码"},model:{value:e.loginUser.password,callback:function(t){e.$set(e.loginUser,"password",t)},expression:"loginUser.password"}})],1),e._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",long:"",size:"large",loading:e.isBtnLoading},nativeOn:{click:function(t){return e.login(t)}}},[e._v("\n          "+e._s(e.btnText)+"\n        ")])],1)],1)],1)],1)},staticRenderFns:[]},Qe=r("VU/8")(ze,Ve,!1,function(e){r("vOT9")},"data-v-2b216c0e",null).exports,We={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"e404"},[t("svg",{attrs:{width:"380px",height:"500px",viewBox:"0 0 837 1045",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns"}},[t("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage"}},[t("path",{attrs:{d:"M353,9 L626.664028,170 L626.664028,487 L353,642 L79.3359724,487 L79.3359724,170 L353,9 Z",id:"Polygon-1",stroke:"#007FB2","stroke-width":"6","sketch:type":"MSShapeGroup"}}),this._v(" "),t("path",{attrs:{d:"M78.5,529 L147,569.186414 L147,648.311216 L78.5,687 L10,648.311216 L10,569.186414 L78.5,529 Z",id:"Polygon-2",stroke:"#EF4A5B","stroke-width":"6","sketch:type":"MSShapeGroup"}}),this._v(" "),t("path",{attrs:{d:"M773,186 L827,217.538705 L827,279.636651 L773,310 L719,279.636651 L719,217.538705 L773,186 Z",id:"Polygon-3",stroke:"#795D9C","stroke-width":"6","sketch:type":"MSShapeGroup"}}),this._v(" "),t("path",{attrs:{d:"M639,529 L773,607.846761 L773,763.091627 L639,839 L505,763.091627 L505,607.846761 L639,529 Z",id:"Polygon-4",stroke:"#F2773F","stroke-width":"6","sketch:type":"MSShapeGroup"}}),this._v(" "),t("path",{attrs:{d:"M281,801 L383,861.025276 L383,979.21169 L281,1037 L179,979.21169 L179,861.025276 L281,801 Z",id:"Polygon-5",stroke:"#36B455","stroke-width":"6","sketch:type":"MSShapeGroup"}})])]),this._v(" "),this._m(0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"message-box"},[r("h1",[e._v("401")]),e._v(" "),r("p",[e._v("未经授权")]),e._v(" "),r("p",[e._v("请重新登录")]),e._v(" "),r("div",{staticClass:"buttons-con"},[r("div",{staticClass:"action-link-wrap"},[r("a",{staticClass:"link-button link-back-button",attrs:{onclick:"history.back(-1)"}},[e._v("返回")]),e._v(" "),r("a",{staticClass:"link-button",attrs:{href:"/login"}},[e._v("重新登录")])])])])}]},Ze=r("VU/8")({name:"P401"},We,!1,function(e){r("kHAM")},"data-v-e96ea3dc",null).exports,Ye={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"e404"},[t("svg",{attrs:{width:"380px",height:"500px",viewBox:"0 0 837 1045",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns"}},[t("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage"}},[t("path",{attrs:{d:"M353,9 L626.664028,170 L626.664028,487 L353,642 L79.3359724,487 L79.3359724,170 L353,9 Z",id:"Polygon-1",stroke:"#007FB2","stroke-width":"6","sketch:type":"MSShapeGroup"}}),this._v(" "),t("path",{attrs:{d:"M78.5,529 L147,569.186414 L147,648.311216 L78.5,687 L10,648.311216 L10,569.186414 L78.5,529 Z",id:"Polygon-2",stroke:"#EF4A5B","stroke-width":"6","sketch:type":"MSShapeGroup"}}),this._v(" "),t("path",{attrs:{d:"M773,186 L827,217.538705 L827,279.636651 L773,310 L719,279.636651 L719,217.538705 L773,186 Z",id:"Polygon-3",stroke:"#795D9C","stroke-width":"6","sketch:type":"MSShapeGroup"}}),this._v(" "),t("path",{attrs:{d:"M639,529 L773,607.846761 L773,763.091627 L639,839 L505,763.091627 L505,607.846761 L639,529 Z",id:"Polygon-4",stroke:"#F2773F","stroke-width":"6","sketch:type":"MSShapeGroup"}}),this._v(" "),t("path",{attrs:{d:"M281,801 L383,861.025276 L383,979.21169 L281,1037 L179,979.21169 L179,861.025276 L281,801 Z",id:"Polygon-5",stroke:"#36B455","stroke-width":"6","sketch:type":"MSShapeGroup"}})])]),this._v(" "),this._m(0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"message-box"},[r("h1",[e._v("404")]),e._v(" "),r("p",[e._v("页面找不到")]),e._v(" "),r("p",[e._v("众里寻他千百度 蓦然回首 那人却在灯火阑珊处")]),e._v(" "),r("div",{staticClass:"buttons-con"},[r("div",{staticClass:"action-link-wrap"},[r("a",{staticClass:"link-button link-back-button",attrs:{onclick:"history.back(-1)"}},[e._v("返回")]),e._v(" "),r("a",{staticClass:"link-button",attrs:{href:"/"}},[e._v("主页")])])])])}]},Ke=r("VU/8")({name:"P404"},Ye,!1,function(e){r("qIQ8")},"data-v-4041cf06",null).exports;o.default.use(Pe.a);var He=[{path:"/login",name:"login",component:Qe},{path:"/401",name:"401",component:Ze},{path:"/404",name:"404",component:Ke}],Je=new Pe.a({routes:He});Je.beforeEach(function(e,t,r){var n=e.meta.name||e.name;window.document.title=(n?n+" - ":"")+"报表系统",document.documentElement.clientWidth<=600&&Ge.commit("CLOSE_SLIDEBAR"),i.a.LoadingBar.start(),r()}),Je.afterEach(function(e,t){i.a.LoadingBar.finish()});var Xe=Je,et=document.documentElement.clientWidth;et<=600?Ge.commit("CLOSE_SLIDEBAR"):Ge.commit("OPEN_SLIDEBAR"),window.onresize=function(){(et=document.documentElement.clientWidth)<=600?Ge.commit("CLOSE_SLIDEBAR"):Ge.commit("OPEN_SLIDEBAR")},o.default.use(i.a),o.default.directive("has",{bind:function(e,t){o.default.prototype.$_has(t.value)||e.parentNode.removeChild(e)}}),new o.default({el:"#app",router:Xe,store:Ge,components:{App:Ue},template:"<App/>"})},O9va:function(e,t){},YdMT:function(e,t){},Zo5t:function(e,t){},fd0r:function(e,t){},h4O7:function(e,t){},iB1g:function(e,t){},kHAM:function(e,t){},m5QB:function(e,t){},mBuK:function(e,t){},mFur:function(e,t){},nBxg:function(e,t){},qIQ8:function(e,t){},"rj/M":function(e,t){},soZy:function(e,t){},sxCx:function(e,t){},szwE:function(e,t){},vOT9:function(e,t){}},["NHnr"]);